<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions">

    <div class="Wid30 Fleft LeftPanel">
        <div class="finetuneBtnBlock Fright">
            <p:commandButton type="button" styleClass="fineTuneBtn fineTuneBtnImg" icon="ui-icon-image">
                <p:effect type="slide" event="click" for="abc">
                    <f:param name="mode" value="'show'" />
                </p:effect>
            </p:commandButton>
        </div>
        <p:panel id="abc" styleClass="fineTuneBlock" style="display: none;">
            <div class="Container100 FTLabel">
                <span class="Fs30">Fine Tune Strategy</span>
                <div class="Wid10 Fright">
                    <p:commandButton type="button" styleClass="fineTuneBtn" icon="fa fa-times">
                        <p:effect type="slide" event="click" for="abc">
                            <f:param name="mode" value="'hide'" />
                        </p:effect>
                    </p:commandButton>
                </div>
            </div>
            <div class="Fs13 fineTuneDetail">
                Rather than having a strategy recommended to me based on my time
                horizon and risk tolerance, I would rather directly choose my investment
                strategy and am familiar with the associated risks.
                The strategy I choose is:
            </div>
            <div class="EmptyBox20"></div>
            <div class="Container100 DispBlock gray">

                <div class="Container25 TexAlRight Fs14 uobSliderLabel">
                    Conservative</div>
                <div class="Container50 TexAlCenter Fs20">
                    <h:inputHidden id="allocValue" value="#{uobpb.allocationIndex}" />
                    <p:slider id="allocSlider" for="allocValue" minValue="0"
                              maxValue="#{uobpb.maxAssetAllocatonPoints}" step="1">
                        <p:ajax event="slideEnd"
                                update=":ceForm:workArea, :ceForm:graphArea"
                                listener="#{uobpb.onAllocSlider}" />
                    </p:slider>
                </div>
                <div class="Container25 TexAlLeft Fs14 uobSliderLabel">
                    Aggressive</div>
                <div class="EmptyBox5"></div>
                <div class="Container100 TexAlCenter">
                    <div class="ContainerIndent">
                        <p:commandButton id="allocSliderResetButton" value="Recommended"
                                         styleClass="uob_button"
                                         update=":ceForm:workArea, :ceForm:graphArea"
                                         actionListener="#{uobpb.doAllocReset}">
                        </p:commandButton>
                    </div>
                </div>
            </div>
        </p:panel>

        <ui:fragment rendered="#{uobpb.pagemanager.page == 0}">

            <div class="step1 fixedHeightLP" style="">

                <ui:include src="/pages/consumer/uob/addon/core0.xhtml" />

            </div>
        </ui:fragment>
        <ui:fragment rendered="#{uobpb.pagemanager.page == 1}">
            <div class="step2 fixedHeightLP">
                <ui:include src="/pages/consumer/uob/addon/income.xhtml" />

            </div>
        </ui:fragment>
        <ui:fragment rendered="#{uobpb.pagemanager.page == 2}">
            <div class="step3 fixedHeightLP">
                <ui:include src="/pages/consumer/uob/addon/debt.xhtml" />

            </div>
        </ui:fragment>
        <ui:fragment rendered="#{uobpb.pagemanager.page >= 3}">
            <div class="step4 fixedHeightLP">
                <div class="Container100">
                    <span class="Fs30">Risk</span>
                </div>
                <div class="container100">
                    <div class="EmptyBox10"></div>
                    <p:tabView id="rTabView" orientation="top"
                               style="background: transparent;" activeIndex="#{uobpb.rTab}"
                               styleClass="NBwidget whiteBG">
                        <p:ajax event="tabChange"
                                update=":ceForm:workArea, :ceForm:graphArea"
                                listener="#{uobpb.onRTabChange}" />
                        <p:tab id="q1" title="1">
                            <ui:include src="/pages/consumer/uob/addon/q1.xhtml" />
                        </p:tab>
                        <p:tab id="q2" title="2">
                            <ui:include src="/pages/consumer/uob/addon/q2.xhtml" />
                        </p:tab>
                        <p:tab id="q3" title="3">
                            <ui:include src="/pages/consumer/uob/addon/q3.xhtml" />
                        </p:tab>
                        <p:tab id="q4" title="4">
                            <ui:include src="/pages/consumer/uob/addon/q4.xhtml" />
                        </p:tab>
                        <p:tab id="q5" title="5">
                            <ui:include src="/pages/consumer/uob/addon/q5.xhtml" />
                        </p:tab>
                        <p:tab id="q6" title="6">
                            <ui:include src="/pages/consumer/uob/addon/q6.xhtml" />
                        </p:tab>
                        <p:tab id="q7" title="7">
                            <ui:include src="/pages/consumer/uob/addon/q7.xhtml" />
                        </p:tab>
                    </p:tabView>
                </div>

            </div>
        </ui:fragment>
        <div class="Container100 LPBtnPanelBottom" style="margin: 5px 0;">
            <div class="Wid100">
                <ui:fragment rendered="#{uobpb.flagforInvestShow}">
                    <p:commandLink id="invsetBtn" value="Invest Now"
                                   styleClass="investNowBtn Fleft"
                                   actionListener="#{uobpb.fundAccount}"
                                   type="submit" />
                </ui:fragment>
                <ui:fragment rendered="#{uobpb.pagemanager.page >= 0 and uobpb.rTab != 6}">
                    <p:commandLink id="nextBtn" value="Next"
                                   styleClass="nextButtonLP Fright"
                                   type="submit"
                                   outcome="transition=slidefade"
                                   update=":ceForm:workArea, :ceForm:graphArea"
                                   actionListener="#{uobpb.gotoNextPage}"/>
                </ui:fragment>
                <ui:fragment rendered="#{uobpb.rTab == 6}">
                    <p:commandLink id="startBtn" value="Start Over"
                                   styleClass="nextButtonLP Fright"
                                   type="submit"
                                   outcome="transition=slidefade"
                                   update=":ceForm:workArea, :ceForm:graphArea"
                                   actionListener="#{uobpb.gotoStartOverPage}"/>
                </ui:fragment>
            </div>
        </div>
    </div>
    <div class="Wid66 Fleft RightPanel">
        <p:panel id="graphArea" style="border: 0px; background: white;">
            <div class="Container100">
                <div class="Fs30 Fleft summaryHeader RPHeadings1"
                     style="cursor: pointer;">Summary</div>
                <div class="Fs30 Fleft detailHeader RPHeadings2"
                     style="cursor: pointer;">Details</div>

                <div class="Wid40 Fright">
                    <div class="Wid35 Fright ReturnValuePanel">
                        <div class="Wid100 ERLabel">Expected Return</div>
                        <div class="Wid100 ERCount">
                            <h:outputText value="#{uobpb.totalExpectedReturns}">
                                <f:convertNumber pattern="##0.00%" />
                            </h:outputText>
                        </div>
                    </div>
                    <div class="Wid35 Fright RiskValuePanel">
                        <div class="Wid100 IRLabel">Investment Risk</div>
                        <div class="Wid100 IRCount">
                            <h:outputText value="#{uobpb.totalRisk}">
                                <f:convertNumber pattern="##0.00%" />
                            </h:outputText>
                        </div>
                    </div>

                </div>
            </div>
            <div class="Container100 tabpanel1 summaryPanel" style="">
                <div class="Container50">
                    <ui:fragment rendered="#{uobpb.typeOfChart == 'HIGHCHART.2DDONUT'}">
                        <div id="2dDonutChart"></div>
                        <h:inputHidden value="#{uobpb.resultChart}"
                                       id="twodDonutValueChart" />
                        <h:inputHidden value="#{uobpb.typeOfChart}" id="typeOfCharts" />
                    </ui:fragment>
                </div>
                <div class="Container50">
                    <div class="EmptyBox30"></div>
                    <p:dataTable styleClass="uob_graphTable"
                                 value="#{uobpb.editableAsset}" var="assetList">

                        <p:column
                                style="width: 1%; background-color: #{assetList.color}; border:0px!important;">
                            <h:outputText value=" " />
                        </p:column>

                        <p:column style="width: 50%" styleClass="Wid50 Fs12 TexAlLeft"
                                  headerText="Asset">
                            <h:outputText value="#{assetList.asset}" />
                        </p:column>
                        <p:column priority="3" style="width: 15%"
                                  styleClass="Fs12 num-text-align TexAlRight" headerText="Weight">
                            <!-- ROHIT's CHANGE -->
                            <h:outputText value="#{assetList.userEdit}">
                                <f:convertNumber pattern="##0%" />
                            </h:outputText>
                        </p:column>
                        <p:column style="width: 34%"
                                  styleClass="Fs12 num-text-align TexAlRight" headerText="Value">
                            <!-- ROHIT's CHANGE -->
                            <h:outputText value="#{assetList.value}">
                                <f:convertNumber pattern="$##,###,###" />
                            </h:outputText>
                        </p:column>
                        <p:columnGroup type="footer">
                            <p:row>
                                <p:column colspan="3" styleClass="Fs12 TexAlLeft FontBold"
                                          footerText="Total">
                                </p:column>
                                <p:column styleClass="Fs12 TexAlRight FontBold"
                                          footerText="#{dataDisplayConverter.displayAsMoneyRounded(uobpb.totalMoneyAllocated)}">
                                </p:column>
                            </p:row>
                        </p:columnGroup>
                    </p:dataTable>
                </div>
            </div>
            <div class="Container100 tabpanel2 detailPanel"
                 style="display: none;">
                <div class="Container100">
                    <div class="EmptyBox10"></div>

                    <p:dataTable styleClass="uob_graphTable" var="ticker"
                                 value="#{uobpb.displayPortfolioList}">

                        <p:column style="width:1%; background-color: #{ticker.color}">
                            <h:outputText value=" " />
                        </p:column>

                        <p:column style="width:61%;" styleClass="Fs12 TexAlLeft">
                            <f:facet name="header">
                                <h:outputText value="Name" />
                            </f:facet>
                            <h:outputText value="#{ticker.namePlusSymbol}" />
                        </p:column>

                        <p:column priority="3" style="width:15%;"
                                  styleClass="Fs12 num-text-align TexAlRight">
                            <!-- ROHIT's CHANGE -->
                            <f:facet name="header">
                                <h:outputText value="Allocated" />
                            </f:facet>
                            <h:outputText value="#{ticker.weight}">
                                <f:convertNumber pattern="##0%" />
                            </h:outputText>
                        </p:column>

                        <p:column style="width:23%;"
                                  styleClass="Fs12 num-text-align TexAlRight">
                            <!-- ROHIT's CHANGE -->
                            <f:facet name="header">
                                <h:outputText value="Value" />
                            </f:facet>
                            <h:outputText value="#{ticker.value}">
                                <f:convertNumber pattern="$##,###,###" />
                            </h:outputText>
                        </p:column>

                        <p:columnGroup type="footer">
                            <p:row>
                                <p:column />
                                <p:column colspan="2" styleClass="Fs14 TexAlLeft FontBold"
                                          footerText="Total">
                                </p:column>
                                <p:column styleClass="Fs14 TexAlRight FontBold"
                                          footerText="#{dataDisplayConverter.displayAsMoneyRounded(uobpb.totalMoneyAllocated)}">
                                </p:column>
                            </p:row>
                        </p:columnGroup>
                    </p:dataTable>
                    <!--<p:dataTable styleClass="uob_graphTable" var="ticker"
                                 value="#{uobpb.displayPortfolioList}">

                        <p:column style="width:1%; background-color: #{ticker.color}">
                            <h:outputText value=" " />
                        </p:column>

                        <p:column priority="4" style="width:14%;"
                                  styleClass="Fs12 TexAlLeft">
                            <f:facet name="header">
                                <h:outputText value="Asset" />
                            </f:facet>
                            <h:outputText value="#{ticker.assetType}" />
                        </p:column>

                        <p:column style="width:17%;" styleClass="Fs12 TexAlLeft">
                            <f:facet name="header">
                                <h:outputText value="Class" />
                            </f:facet>
                            <h:outputText value="#{ticker.subclass}" />
                        </p:column>

                        <p:column style="width:10%;"
                                  styleClass="Fs12 num-text-align TexAlRight">
                            &lt;!&ndash; ROHIT's CHANGE &ndash;&gt;
                            <f:facet name="header">
                                <h:outputText value="Allocated" />
                            </f:facet>
                            <h:outputText value="#{ticker.weight}">
                                <f:convertNumber pattern="##0.00%" />
                            </h:outputText>
                        </p:column>

                        <p:column style="width:10%;" styleClass="Fs12 TexAlLeft">
                            <f:facet name="header">
                                <h:outputText value="Ticker" />
                            </f:facet>
                            <h:outputText value="#{ticker.symbol}" />
                        </p:column>

                        <p:column priority="3" style="width:25%;"
                                  styleClass="Fs12 TexAlLeft">
                            <f:facet name="header">
                                <h:outputText value="Name" />
                            </f:facet>
                            <h:outputText value="#{ticker.name}" />
                        </p:column>

                        <p:column style="width:18%;"
                                  styleClass="Fs12 num-text-align TexAlRight">
                            &lt;!&ndash; ROHIT's CHANGE &ndash;&gt;
                            <f:facet name="header">
                                <h:outputText value="Value" />
                            </f:facet>
                            <h:outputText value="#{ticker.value}">
                                <f:convertNumber currencySymbol="$" type="currency" />
                            </h:outputText>
                        </p:column>

                        <p:columnGroup type="footer">
                            <p:row>
                                <p:column />
                                <p:column priority="4" />
                                <p:column colspan="3" styleClass="Fs14 TexAlLeft FontBold"
                                          footerText="Total">
                                </p:column>
                                <p:column priority="3" />

                                <p:column styleClass="Fs14 TexAlRight FontBold"
                                          footerText="#{dataDisplayConverter.displayAsMoney(uobpb.totalMoneyAllocated)}">
                                </p:column>
                            </p:row>
                        </p:columnGroup>
                    </p:dataTable>-->

                </div>
            </div>
        </p:panel>
    </div>
    <script>
        $(document).ready(function ()
                          {
                              if(document.getElementById('ceForm:typeOfCharts') != null){
                                  if (document.getElementById('ceForm:typeOfCharts').value == 'HIGHCHART.2DDONUT')
                                  {
                                      draw2dDonut1lyrChart();
                                  }
                              }

                              $('.summaryHeader').click(function(){
                                  $('.summaryPanel').show();
                                  $('.detailPanel').hide();
                              });
                              $('.detailHeader').click(function(){
                                  $('.summaryPanel').hide();
                                  $('.detailPanel').show();
                              });
                          });
    </script>
</ui:composition>
