<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ps="http://primefaces.org/spark"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">
    <h:outputScript name="js/jquery.url.js"
                    library="#{uiLayout.webProfile.cssdir}"/>
    <script type="text/javascript">


        /*global $, jQuery*/
        /*MENU*/


        $(function ()
          {
              $page = jQuery.url.attr("file");

              $('#dashboardMenuHighlight').each(function ()
                                                {
                                                    if (($page == 'index.xhtml'))
                                                    {
                                                        $(this).addClass('mbSelected');
                                                    }
                                                    else
                                                    {
                                                        $(this).removeClass('mbSelected');
                                                    }
                                                });
              $('#newaccountMenuHighlight').each(function ()
                                                 {
                                                     if (($page == 'cadd.xhtml'))
                                                     {
                                                         $(this).addClass('mbSelected');
                                                     }
                                                     else
                                                     {
                                                         $(this).removeClass('mbSelected');
                                                     }
                                                 });
              $('#myprofileMenuHighlight').each(function ()
                                                {
                                                    if (($page == 'myprofile.xhtml'))
                                                    {
                                                        $(this).addClass('mbSelected');
                                                    }
                                                    else
                                                    {
                                                        $(this).removeClass('mbSelected');
                                                    }
                                                });

              $('#tradeMenuHighlight').each(function ()
                                            {
                                                if (($page == 'trade.xhtml'))
                                                {
                                                    $(this).addClass('mbSelected');
                                                }
                                                else
                                                {
                                                    $(this).removeClass('mbSelected');
                                                }
                                            });
              $('#aggrMenuHighlight').each(function ()
                                           {
                                               if (($page == 'widget.xhtml'))
                                               {
                                                   $(this).addClass('mbSelected');
                                               }
                                               else
                                               {
                                                   $(this).removeClass('mbSelected');
                                               }
                                           });
              $('#modelMenuHighlight').each(function ()
                                            {
                                                if (($page == 'assetworkflow.xhtml'))
                                                {
                                                    $(this).addClass('mbSelected');
                                                }
                                                else
                                                {
                                                    $(this).removeClass('mbSelected');
                                                }
                                            });

          });


    </script>

    <script>
        $(document).ready(function() {
            $(".nav li a").each(function() {
                if ($(this).next().length > 0) {
                    $(this).addClass("parent");
                };
            })

            $(".toggleMenu").click(function(e) {
                e.preventDefault();
                $(this).toggleClass("active");
                $(".nav").toggle();
            });
            adjustMenu();
        })

        $(window).bind('resize orientationchange', function() {
            ww = document.body.clientWidth;
            adjustMenu();
        });

        var adjustMenu = function() {
            var ww = document.body.clientWidth;
            if (768 > ww) {
                $(".toggleMenu").css("display", "inline-block");
                if (!$(".toggleMenu").hasClass("active")) {
                    $(".nav").hide();
                } else {
                    $(".nav").show();
                }

                $(".nav li").unbind('mouseenter mouseleave click');
                $(".nav li a.parent").unbind('click').bind('click', function(e) {
                    // must be attached to anchor element to prevent bubbling
                    e.preventDefault();
                    $(this).parent("li").toggleClass("hover");
                });
            }
            else if (ww >= 768) {
                $(".toggleMenu").css("display", "none");
                $(".nav").show();
                $(".nav li").removeClass("hover");
                $(".nav li a").unbind('click');
                $(".nav li").unbind('mouseenter mouseleave').bind('mouseenter mouseleave', function() {
                    // must be attached to li so that mouseleave is not triggered when hover over submenu
                    $(this).toggleClass('hover');
                });
            }
        }

    </script>





    <div class="Wid60 Fright">



            <a class="toggleMenu" href="#">Menu</a>
            <ul class="nav" id="menuMainNavigation" >
                <li  class="test" id="dashboardMenuHighlight">
                    <a href="#{uiLayout.defaultHome}" id="menudashboardbtn">Dashboard</a>

                </li>

                <ui:fragment rendered="#{webutil.hasAccess('USER')}">
                <li  id="newaccountMenuHighlight">
                    <p:commandLink rendered="true" id="menunewacctbtn"
                                   actionListener="#{uiLayout.doMenuAction('consumer', 'cadd.xhtml?app=N')}">
                        <h:outputText value="New Account"/>
                    </p:commandLink>
                </li>

                </ui:fragment>

                <ui:fragment rendered="#{(webutil.hasSubMenu('Operations')) and ((webutil.hasAccess('Advisor') and webutil.hasRole('Operations')) or webutil.hasAccess('SuperAdmin'))}">
                <li  class="">
                    <a href="#" class="submenuOperBtn" id="menuOperbtn">Operations</a>
                    <ul>
                        <ui:fragment rendered="#{webutil.hasMenu('Trade','Operations')}">
                            <li id="tradeMenuHighlight">
                                <a href="/pages/advisor/operations/trade.xhtml" id="menutradebtn">Trade</a>
                            </li>
                        </ui:fragment>
                        <ui:fragment rendered="#{webutil.hasMenu('Model','Operations')}">
                            <div class="menuSeperator"></div>
                            <li id="modelMenuHighlight">
                                <a href="/pages/advisor/assetworkflownew.xhtml" id="menutradebtn">Model</a>
                            </li>
                        </ui:fragment>
                    </ul>
                </li>
                </ui:fragment>

                <ui:fragment rendered="#{(webutil.hasSubMenu('Admin')) and ((webutil.hasAccess('Advisor') and webutil.hasRole('Admin')) or webutil.hasAccess('SuperAdmin'))}">
                <li  class="">
                    <a href="#" class="submenuAdminBtn" id="menuAdminbtn">Admin</a>
                    <ul>
                        <ui:fragment rendered="#{webutil.hasMenu('Login Management','Admin')}">
                            <li id="AcctEmulMenuHighlight">
                                <a href="/pages/advisor/user_mng.xhtml" id="menuLoginMgmtbtn">Login Management</a>
                            </li>
                        </ui:fragment>

                        <ui:fragment rendered="#{webutil.hasMenu('Advisor Management','Admin')}">
                            <div class="menuSeperator"></div>
                            <li id="AcctEmulMenuHighlight">
                                <a href="/pages/productadmin/adv.xhtml" id="menuAdvMgmtbtn">Advisor Management</a>
                            </li>
                        </ui:fragment>

                        <ui:fragment rendered="#{webutil.hasMenu('Email Logs','Admin')}">
                            <div class="menuSeperator"></div>
                            <li id="AcctEmulMenuHighlight">
                                <a href="/pages/productadmin/email_logs.xhtml" id="menuEmailLogbtn">Email Logs</a>
                            </li>
                        </ui:fragment>
                    </ul>
                </li>
                </ui:fragment>

                <ui:fragment rendered="#{webutil.hasAccess('SuperAdmin')}">
                <li  class="">
                    <a href="#" class="submenuSABtn" id="menuSuperAdminbtn">Product Admin</a>
                    <ul>
                        <li id="filePrcsMenuHighlight">
                            <a href="/pages/productadmin/fileProcessEmulation.xhtml" id="menuFlPrcsbtn">File Processing</a>
                        </li>
                        <div class="menuSeperator"></div>
                        <li id="AcctEmulMenuHighlight">
                            <a href="/pages/productadmin/accountEmulation.xhtml" id="menuAcctEmulbtn">Account Emulation</a>
                        </li>
                    </ul>
                </li>
                </ui:fragment>


                <ui:fragment rendered="#{webutil.hasRole('DEMO')}">
                <li  class="">
                    <p:commandLink rendered="true" id="menuaggrbtn"
                                   actionListener="#{aggrBean.startup('D')}">
                        <h:outputText value="Aggregation"/>
                    </p:commandLink>

                </li>
                </ui:fragment>

                <ui:fragment rendered="#{webutil.hasRole('DEMO')}">
                <li>
                    <p:commandLink rendered="true" id="menureportsbtn"
                                   actionListener="#{uiLayout.doMenuAction('consumer', 'creports.xhtml')}">
                        <h:outputText value="Reports"/>
                    </p:commandLink>
                </li>
                </ui:fragment>

                <li id="">
                    <a href="#" class="" id="">My Profile</a>

                    <ul>
                        <li><a href="/pages/common/myprofile.xhtml">Setting</a></li>
                        <div class="menuSeperator"></div>
                        <li><a href="">My Advisors</a></li>
                        <div class="menuSeperator"></div>
                        <li>
                            <h:form>
                                <h:commandLink id="menulogoutBtn" actionListener="#{sessionControl.logout}" styleClass="idLogoutCommon">
                                    <h:outputText value="Logout"/>
                                </h:commandLink>
                            </h:form>
                        </li>
                    </ul>
                </li>


            </ul>


    </div>
</ui:composition>

