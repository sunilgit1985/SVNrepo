<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<f:metadata>
    <f:viewParam name="p_acctnum" value="#{positionBean.acctnum}"/>
    <f:viewParam name="p_logonid" value="#{positionBean.logonid}"/>
</f:metadata>

<h:body>
    <ui:composition template="/template/common/advisorLayout.xhtml">
        <ui:define name="content">
            <div id="main-content" class="content_section" style="background-color: #f5f5f5; padding: 10px;">
                <div id="wrapper" class="container">
                    <h:form>
                        <h2>Current Position</h2>
                        <p:panelGrid styleClass="invNBgrid">
                            <p:row>
                                <p:column style="text-align: left; padding-right: 2px">
                                    <h:outputLabel value="Account#:"/>
                                </p:column>
                                <p:column style="text-align: left; padding-right: 2px">
                                    <h:outputLabel value="#{positionBean.clientAccountID}"/>
                                </p:column>
                                <p:column style="text-align: left; padding-right: 2px">
                                    <h:outputLabel value="Name:"/>
                                </p:column>
                                <p:column style="text-align: left; padding-right: 2px">
                                    <h:outputLabel value="#{positionBean.firstname}"/>
                                </p:column>
                                <p:column style="text-align: left; padding-right: 2px">
                                    <h:outputLabel value="#{positionBean.lastname}"/>
                                </p:column>
                                <p:column style="text-align: left; padding-right: 2px">
                                    <h:outputLabel value="Date Opened:"/>
                                </p:column>
                                <p:column style="text-align: left; padding-right: 2px">
                                    <h:outputLabel value="#{positionBean.dateOpened}"/>
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                        <p:dataTable id="dataTable" var="position" value="#{positionBean.positionList}" styleClass="invDataTable">
                            <p:column sortBy="#{position.ticker}" headerText="Ticker" style="width:100px; text-align: left" resizable="true">
                                <h:outputText value="#{position.ticker}"/>
                            </p:column>
                            <p:column sortBy="#{position.name}"
                                      style="width:250px; text-align: left;"
                                      headerText="Description" resizable="true">
                                <h:outputText value="#{position.description}"/>
                            </p:column>
                            <p:column sortBy="#{position.side}" headerText="Side" style="width:30px; text-align: left"
                                      resizable="true">
                                <h:outputText value="#{position.side}"/>
                            </p:column>
                            <p:column sortBy="#{position.qty}" headerText="Shares" style="width:50px; text-align: right" resizable="true">
                                <h:outputText value="#{position.qty}">
                                    <f:convertNumber pattern="###,###,###"/>
                                </h:outputText>
                            </p:column>
                            <p:column sortBy="#{position.costBasisPrice}" headerText="Purchased" style="width:100px; text-align: right" resizable="true">
                                <h:outputText value="#{position.costBasisPrice}">
                                    <f:convertNumber type="currency" currencySymbol="$"/>
                                </h:outputText>
                            </p:column>
                            <p:column sortBy="#{position.costBasisMoney}" headerText="Cost Basis" style="width:150px; text-align: right" resizable="true">
                                <h:outputText value="#{position.costBasisMoney}">
                                    <f:convertNumber type="currency" currencySymbol="$"/>
                                </h:outputText>
                            </p:column>
                            <p:column sortBy="#{position.markPrice}" headerText="Mark Price" style="width:100px; text-align: right"
                                      resizable="true">
                                <h:outputText value="#{position.markPrice}">
                                    <f:convertNumber type="currency" currencySymbol="$"/>
                                </h:outputText>
                            </p:column>
                            <p:column sortBy="#{position.invested}" headerText="Current Value" style="width:100px; text-align: right"
                                      resizable="true">
                                <h:outputText value="#{position.invested}">
                                    <f:convertNumber type="currency" currencySymbol="$"/>
                                </h:outputText>
                            </p:column>
                            <p:column sortBy="#{position.fifoPnlUnrealized}" headerText="Gain/Loss" style="width:100px; text-align: right"
                                      resizable="true">
                                <h:outputText value="#{position.fifoPnlUnrealized}">
                                    <f:convertNumber type="currency" currencySymbol="$"/>
                                </h:outputText>
                            </p:column>

                            <p:columnGroup type="footer">
                                <p:row>
                                    <p:column colspan="4" footerText="Total" style="text-align:right"/>

                                    <p:column colspan="2" footerText="#{dataDisplayConverter.displayAsMoney(positionBean.totalmoney)}" style="text-align:right"/>
                                    <p:column colspan="2" footerText="#{dataDisplayConverter.displayAsMoney(positionBean.totalvalue)}" style="text-align:right"/>
                                    <p:column footerText="#{dataDisplayConverter.displayAsMoney(positionBean.totalpnl)}" colspan="2" style="text-align:right"/>
                                </p:row>
                            </p:columnGroup>
                        </p:dataTable>

                    </h:form>

                </div>
            </div>

        </ui:define>
    </ui:composition>

</h:body>
</html>