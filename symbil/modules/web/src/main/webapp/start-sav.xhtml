<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pe="http://primefaces.org/ui/extensions"
                template="/template/common/template.xhtml">

<f:metadata>
    <f:viewParam name="mode" value="#{ltamprofile.mode}"/>
    <f:viewParam name="advisor" value="#{ltamprofile.beanAdvisor}"/>
    <f:viewParam name="rep" value="#{ltamprofile.beanRep}"/>
    <f:viewParam name="TimeToSaveID" value="#{ltamprofile.beanTimeToSaveID}"/>
    <f:viewParam name="amount" value="#{ltamprofile.beanAmount}"/>
    <f:viewParam name="first" value="#{ltamprofile.beanfirstname}"/>
    <f:viewParam name="last" value="#{ltamprofile.beanlastname}"/>
    <f:event type="preRenderView" listener="#{ltamprofile.preRenderView}"/>
</f:metadata>

<ui:define name="content">
<h:outputScript name="/js/ltamCharts.js" library="ltam"/>

<!-- BOX START -->
<h:form id="ltamForm">
<p:dialog widgetVar="dlgWelcome" closable="true" appendTo="@(body)"
          visible="#{ltamprofile.welcomeDialog}">
    <p:panel id="intropanel" style="border: 0px; background: transparent; width: 500px">

        <div class="layout-portlets-box">

            <div class="Container100 Responsive100">
                <div class="Container100 Responsive100">
                    <div class="ContainerIndent TexAlCenter">
                        <h1>
                            You have entered<br/>
                            Symbil
                        </h1>

                        <div class="EmptyBox10"></div>
                        Clients have trusted Ladenburg Thalmann Asset Management
                        to manage over $2 billion of their assets.
                        <div class="EmptyBox20"></div>
                        See what LTAM has to offer by answering a few short questions
                        to help us build you a risk managed portfolio customized to your
                        financial needs.
                        <div class="EmptyBox10"></div>
                        <div class="Fs8 TexAlCenter">
                            You are leaving the website of individual(s) who are registered representatives of an
                            Affiliate of Ladenburg Thalmann Asset Management, Inc. (LTAM) and have entered LTAM's
                            Symbil Website. The individual(s) of the Affiliate and the Affiliate may receive a referral fee
                            for referring you to this site.
                        </div>
                        <div class="EmptyBox10"></div>
                        <div class="Fs8 TexAlCenter">
                           By using Symbil you consent to electronic delivery of our
                           <a href="http://www.ladenburgfunds.com/docs/LTAM-Symbil-Brochure.pdf" target="_ltam">brochure</a>
                            with privacy policy.
                        </div>
                        <div class="EmptyBox10"></div>
                        <p:commandButton value="Get Started"
                                         onclick="PF('dlgWelcome').hide()">
                        </p:commandButton>
                    </div>
                </div>
            </div>
        </div>

    </p:panel>
</p:dialog>

<p:panel id="contentpanel" style="border: 0px; background: transparent">

<div class="layout-portlets-box">

    <div class="Container100 Responsive100">
        <div class="Container100 Responsive100">
            <div class="ContainerIndent Responsive100">
                            <p:steps id="ltamprogressbar" activeIndex="#{ltamprofile.ltammenu}">
                                <p:menuitem value="Start"/>
                                <p:menuitem value="Goal" />
                                <p:menuitem value="Horizon"/>
                                <p:menuitem value="Risk"/>
                                <p:menuitem value="Risk"/>
                                <p:menuitem value="Risk"/>
                                <p:menuitem value="Review"/>
                            </p:steps>
           </div>
            <div class="Container100 Responsive100">
                <div class="ContainerIndent Responsive100">
                  <p:messages showDetail="false" escape="true" closable="true"/>
                </div>
             </div>
        </div>
   </div>
    <div class="Container100 Responsive100">
        <div class="Container60 Responsive100">
            <p:panel id="inputArea" style="border: 0px; background: transparent; height: 270px">
                <ui:fragment rendered="#{ltamprofile.pagemanager.page == 0}">
                    <ui:fragment rendered="#{! ltamprofile.time2SaveWelcome}">
                        <ui:include src="/addon/page1.xhtml"/>
                    </ui:fragment>
                    <ui:fragment rendered="#{ltamprofile.time2SaveWelcome}">
                        <ui:include src="/addon/page1A.xhtml"/>
                    </ui:fragment>
                </ui:fragment>
                <ui:fragment rendered="#{ltamprofile.pagemanager.page == 1}">
                    <ui:include src="/addon/page2.xhtml"/>
                </ui:fragment>
                <ui:fragment rendered="#{ltamprofile.pagemanager.page == 2}">
                    <ui:include src="/addon/page3.xhtml"/>
                </ui:fragment>
                <ui:fragment rendered="#{ltamprofile.pagemanager.page == 3}">
                    <ui:include src="/addon/page5.xhtml"/>
                </ui:fragment>
                <ui:fragment rendered="#{ltamprofile.pagemanager.page == 4}">
                    <ui:include src="/addon/page4.xhtml"/>
                </ui:fragment>
                <ui:fragment rendered="#{ltamprofile.pagemanager.page == 5}">
                    <ui:include src="/addon/page6.xhtml"/>
                </ui:fragment>

                <div class="EmptyBox10"/>
                <f:facet name="footer">
                     <p:commandButton value="Previous" styleClass="Fleft" rendered="#{ltamprofile.pagemanager.prevButtonStat}"
                                      update=":ltamForm:contentpanel,:ltamForm:disclaimer"
                                      actionListener="#{ltamprofile.prevPage}"/>
                     <p:commandButton value="Next" styleClass="Fright" rendered="#{ltamprofile.pagemanager.nextButtonStat}"
                                      update=":ltamForm:contentpanel,:ltamForm:disclaimer"
                                      actionListener="#{ltamprofile.nextPage}"/>
                </f:facet>
            </p:panel>
        </div>
        <div class="Container40 Responsive100">
            <div class="ContainerIndent">
                <p:panel id="graphArea" style="border: 0px; background: transparent"
                         rendered="#{ltamprofile.displayGraphs}">
                        <div class="EmptyBox5"></div>
                        <div class="Container100 Responsive100">
                            <p:panel style="border: 0px; background: transparent"
                                     rendered="#{ltamprofile.displayMeter}">
                              <div class="EmptyBox5"></div>
                                <div class="Container100 Responsive100">
                                    <table style="width: 100%">
                                        <tr>
                                            <td colspan="3">
                                                <div class="TexAlCenter" style="font-size: 1.5em">
                                                    Your current risk level is
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
                                                <div class="EmptyBox5"></div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width: 5%; text-align: right; vertical-align: middle">Low</td>
                                            <td style="width: 90%; text-align: center; vertical-align: middle">
                                                <ui:repeat var="tlist" value="#{ltamprofile.themeList}">
                                                    <h:graphicImage name="images/riskMeter.svg" library="ltam"
                                                                    rendered="#{ltamprofile.themeData.sortorder != tlist.sortorder}"
                                                                    style="width: 20%; background: transparent"
                                                                    styleClass="Fleft"/>
                                                    <h:graphicImage name="images/SriskMeter.svg" library="ltam"
                                                                    rendered="#{ltamprofile.themeData.sortorder == tlist.sortorder}"
                                                                    style="width: 20%; background: transparent"
                                                                    styleClass="Fleft"/>
                                                </ui:repeat>
                                            </td>
                                            <td style="width: 5%; text-align: left; vertical-align: middle">High </td>
                                        </tr>
                                    </table>
                                </div>
                            </p:panel>

                    </div>
                    <div class="Container100 Responsive100">
                        <div class="EmptyBox10"></div>
                        <div class="Container100">
                            <p:outputPanel id="charts" style="border: 0px; background: transparent">
                                <p:panel style="border: 0px; background: transparent"
                                         rendered="#{ltamprofile.reviewPage ? 'false' : 'true'}">
                                    <div class="Container100  Fleft">
                                        <div class="ContainerIndent">
                                            <p:outputPanel deferred="true">
                                                <p:chart type="pie" model="#{ltamprofile.ltamcharts.pieChart}"
                                                         rendered="#{ltamprofile.ltamcharts.pieChart != null}"
                                                         style="width:100%;height:190px;"
                                                         extender="ltam_pie"
                                                         responsive="true">
                                                </p:chart>
                                            </p:outputPanel>
                                        </div>
                                    </div>
                                </p:panel>
                                <p:panel style="border: 0px; background: transparent"
                                         rendered="#{ltamprofile.reviewPage}">
                                    <div class="Container100 Fleft">
                                        <div class="ContainerIndent">
                                            <p:dataTable styleClass="invAllocTable"
                                                         value="#{ltamprofile.allocationData.ltamAllocatedAssetList}"
                                                         var="allocatedList">

                                                <p:column style="width: 2%; background-color: #{allocatedList.color};"
                                                        priority="0">
                                                    <h:outputText value=" "/>
                                                </p:column>

                                                <p:column styleClass="Wid40 TexAlLeft"
                                                          resizable="true" headerText="Asset"
                                                          priority="0">>
                                                    <h:outputText value="#{allocatedList.displayname}"/>
                                                </p:column>
                                                <p:column styleClass="Wid20 TexAlRight"
                                                          resizable="true" headerText="Weight"
                                                          priority="2">
                                                    <h:outputText value="#{allocatedList.weightAsPercent}">
                                                        <f:convertNumber pattern="##0.00%"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column styleClass="Wid30 TexAlRight"
                                                          resizable="true" headerText="Value"
                                                          priority="0">
                                                    <h:outputText value="#{allocatedList.money}">
                                                        <f:convertNumber currencySymbol="$" type="currency"/>
                                                    </h:outputText>
                                                </p:column>
                                            </p:dataTable>
                                        </div>
                                    </div>
                                </p:panel>
                            </p:outputPanel>
                        </div>
                    </div>
               </p:panel>
            </div>
        </div>
    </div>
</div>

<p:outputPanel id="dataarea" style="border: 0px"
               rendered="#{ltamprofile.reviewPage}">
</p:outputPanel>

<p:outputPanel id="disclaimer" style="border: 0px"
               rendered="#{! ltamprofile.demomode}">
<div class="layout-portlets-box">
    <div class="Container100 Responsive100">
        <div class="Container100 Responsive100">
            <div class="ContainerIndent Responsive100">
                <div class="Fs12 TexAlCenter">
                    <ui:fragment rendered="#{ltamprofile.pagemanager.page == 1}">
                        <h:outputText value="#{uiLayout.getPageInfo(ltamprofile.pagemanager.page)}" escape="false"/>
                    </ui:fragment>
                    <ui:fragment rendered="#{ltamprofile.pagemanager.page == 2}">
                        <h:outputText value="#{uiLayout.getPageInfo(ltamprofile.pagemanager.page)}" escape="false"/>
                    </ui:fragment>
                    <ui:fragment rendered="#{ltamprofile.pagemanager.page == 3}">
                        <h:outputText value="#{uiLayout.getPageInfo(ltamprofile.pagemanager.page)}" escape="false"/>
                    </ui:fragment>
                    <ui:fragment rendered="#{ltamprofile.pagemanager.page == 4}">
                        <h:outputText value="#{uiLayout.getPageInfo(ltamprofile.pagemanager.page)}" escape="false"/>
                    </ui:fragment>
                    <ui:fragment rendered="#{ltamprofile.pagemanager.page == 5}">
                        <h:outputText value="#{uiLayout.getPageInfo(ltamprofile.pagemanager.page)}" escape="false"/>
                    </ui:fragment>
                <div class="EmptyBox10"></div>
                    <h:outputText value="#{uiLayout.disclaimer}" escape="false"/>
            </div>
        </div>
        </div>
    </div>
</div>
</p:outputPanel>

</p:panel>

</h:form>


</ui:define>

</ui:composition>
